---
title: 柿子得挑软的捏
date: 2018-3-23 19:48:01
tags:
- 新浪汽车
- 爬虫
- Python
categories:
- 武林秘笈
---

面对汽车之家反爬手段碰壁后，自知还要提高知识水平，只得悻悻收手，退而求其次，瞄上了新浪汽车。分析源代码后发现，新浪汽车并没有对车型配置数据做反爬保护。Excited！有了和汽车之家斗智斗勇的经验，爬新浪汽车就轻松多了。基本上还是原来的思路：从品牌到车系，再到车型。

#### 从品牌到车系

新浪汽车也有一个和汽车之家类似的[车型大全](http://db.auto.sina.com.cn/)，且叫做品牌页面，这个页面里有所有品牌及下属车系的信息，可以直接从这个页面获得车系url。分析车系url后发现，只要拿到车系id后，就能得到车系url。

#### 从车系到车型

得到车系url后，发现在车系配置页面（例：[奥迪A4L配置页面](http://db.auto.sina.com.cn/9/peizhi/)）直接拿车型配置数据并不是很好很方便。眉头一皱，另辟蹊径：对车型对比页面进行分析后发现，[这里](http://db.auto.sina.com.cn/api/car/getCompareCarInfo.json?carid=31683)以字典的形式存储了一个车型的配置数据，只要从车系页面拿到carid值，填入url中相应的carid字段，即可得到所有车型的配置数据。

<!-- more -->

#### Code

Code: https://github.com/Liubaichuan/sina_auto_spider

Wait,it seems...another way: http://db.auto.sina.com.cn/api/car/getCarInfoList.json?car_id=31683

#### Coda

其实，瞄上新浪汽车实属无奈。一方面，汽车之家数据全面且准确但久攻不下、领导责问；另一方面新浪汽车手到擒来但缺失车型上市时间这一关键数据。哎，两害相权取其轻，柿子得挑软的捏。

