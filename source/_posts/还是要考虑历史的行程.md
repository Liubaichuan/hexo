---
title: 还是要考虑历史的行程
date: 2018-3-26 16:12:25
tags:
- 易车网
- 爬虫
- Python
categories:
- 武林秘笈
---

虽然在新浪汽车得手，但数据中缺少的车型上市时间却是我们{%ruby 大数据分析|批批替造车 %}的重要维度之一。所以，世界上没有什么数据是一次爬虫不能采集的，如果有，那就两次。

不过，这次的目标是易车网。这家网站同样有个相似的车型大全，车型大全同样是相似的结构。还是熟悉的味道，还是熟悉的配方：品牌—车系—车型。

#### 品牌

不料，第一步拿brand_id就遇到了麻烦：从[车型大全](http://car.bitauto.com/)直接入手虽说有几种方案，但不是很方便。喝杯茶，对网站再次摸骨，终于找到了一个不错的[入口](http://api.car.bitauto.com/CarInfo/getlefttreejson.ashx?tagtype=chexing&pagetype=masterbrand&objid=0)。

#### 车系

嗯，车系字段手到擒来。

#### 车型

车型分为在售车型和停售车型。稍微麻烦的是抓取停售车型，好在网站对于停售车型的组织也和汽车之家类似，而且相关的url解析工作还没有汽车之家的复杂。

#### 配置

配置的抓取采用了和上次类似的方案：以车型对比页面为切入口。不同的是，上次装满一个车型配置数据的，是可以轻松推走的购物车，而这次是沉重勒手的菜篮子：列表。所有配置数据存储在一个矩阵里，解析则需要对照各类车型的配置名称，这样你才能知道矩阵里的配置数据对应于哪一个配置名称。因为传统能源汽车的配置名称各不相同，新能源汽车的配置名称各不相同，传统能源汽车的配置名称和新能源汽车的配置名称更是不同。

<!-- more -->

#### Code

Code：https://github.com/Liubaichuan/bitauto

#### Coda

至此，终于算是有了汽车配置数据库，解决了新浪版没有车型上市时间的尴尬。现在，有了他，才能改变中国；有了车型上市时间，才能考虑历史的行程。